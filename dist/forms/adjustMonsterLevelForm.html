<form>
    <h1>{{localize "PF2EADJUSTMONSTERLEVEL.title"}}</h1>
    <p>This form adjusts a monster's level, scaling its stats according to the tables in Chapter 2 of the Gamemastery
        Guide. Stats that fall between two tiers (e.g. between Moderate and High) will be interpolated. Stats below the
        minimum or above the maximum from the GMG table will be extrapolated (marked by ⚠️), except ability scores 0 or
        below. Preview items that will be adjusted with the foldout below.</p>
    <h2>{{localize "PF2EADJUSTMONSTERLEVEL.nameLevelRoadmap"}}</h2>
    <div class="form-group setting">
        <label for="adjustMonsterLevelName" class="adjustMonsterLevelFormText">
            {{localize "PF2EADJUSTMONSTERLEVEL.name"}}
        </label>
        <input id="adjustMonsterLevelName" name="PF2EADJUSTMONSTERLEVEL.name" class="adjustMonsterLevelFormText" value="">
    </div>
    <div class="form-group setting">
        <label for="adjustMonsterLevelLevel" class="adjustMonsterLevelFormText">
            {{localize "PF2EADJUSTMONSTERLEVEL.level"}}
        </label>
        <select name="PF2EADJUSTMONSTERLEVEL.level" id="adjustMonsterLevelLevel" class="adjustMonsterLevelFormTextSmall">
            {{#each Levels}}
                <option value="{{this}}" >{{this}}</option>
            {{/each}}
        </select>
    </div>
    <div class="buttons">
        <button type="submit" id="adjustMonsterLevelFormSubmit">Submit</button>
    </div>
    <h2><a onclick="expandCollapseAdjustments()" id="adjustments-toggle" class="adjustments-collapsed">Statistics to be Scaled</a></h2>
    <div id="adjustments-content" class="adjustments-collapsed">
    {{#each ToModify}}
        <h3>{{this.displayName}}</h3>
        <div class="adjustment-group">
        {{#each this.adjustments}}
            <div class="form-group setting">
                {{#if (not this.displayName)}}
                    <span class="adjustMonsterLevelFormText">{{localize this.statistic}}</span>
                {{else}}
                    <span class="adjustMonsterLevelFormText">{{this.displayName}}</span>
                {{/if}}
                <span class="adjustMonsterLevelFormText">{{this.displayValue}}</span>
            </div>
        {{/each}}
        </div>
    {{/each}}
    </div>

</form>
<script>
    current = {{{json Current}}}

    function expandCollapseAdjustments() {
        let toggle = document.getElementById("adjustments-toggle")
        let content = document.getElementById("adjustments-content")
        let expanded = content.classList.contains('adjustments-expanded')
        if( expanded ) {
            toggle.classList.remove('adjustments-expanded')
            toggle.classList.add('adjustments-collapsed')
            content.classList.remove('adjustments-expanded')
            content.classList.add('adjustments-collapsed')
        }
        else {
            toggle.classList.remove('adjustments-collapsed')
            toggle.classList.add('adjustments-expanded')
            content.classList.remove('adjustments-collapsed')
            content.classList.add('adjustments-expanded')
        }

    }

    function setDefaults() {
        let nameElem = document.getElementById("adjustMonsterLevelName")
        if(nameElem && 'PF2EADJUSTMONSTERLEVEL.name' in current )
            nameElem.value = current['PF2EADJUSTMONSTERLEVEL.name']
        let levelElem = document.getElementById("adjustMonsterLevelLevel")
        if(levelElem && 'PF2EADJUSTMONSTERLEVEL.level' in current)
            levelElem.value = current['PF2EADJUSTMONSTERLEVEL.level']
    }
    setDefaults();
</script>